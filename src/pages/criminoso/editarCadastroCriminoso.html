<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <title>Editar Cadastro de Vítima</title>
</head>

<body>
    <div class="container-fluid col-md-8 mt-5 pt-5">
        <h1>Editar Cadastro de Criminoso</h1>
        <p>Preencha os campos obrigatórios (*) antes de salvar.</p>

        <div class="container-fluid col-md-8 mt-5 pt-5"></div>
        <form>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="nome">Nome</label>
                    <input type="text" class="form-control" id="nome" placeholder="Nome">
                </div>
                <div class="form-group col-md-6">
                    <label for="sobrenome">Sobrenome</label>
                    <input type="text" class="form-control" id="sobrenome" placeholder="Sobrenome">
                </div>
            </div>
            <div class="form-group">
                <label for="nacionalidade">Nacionalidade</label>
                <input type="text" class="form-control" id="nacionalidade" placeholder="Brasil">
            </div>
            <div class="form-group">
                <label for="nacionalidade">Data de Nascimento</label>
                <input type="date" class="form-control" id="nacionalidade" placeholder="07/10/2002">
            </div>
            <div class="form-group">
                <label for="nacionalidade">Altura</label>
                <input type="text" class="form-control" id="nacionalidade" placeholder="167">
            </div>
            <div class="form-group">
                <label for="genero">Gênero</label>
                <select id="genero" class="form-control">
                    <option selected>Feminino</option>
                    <option>Masculino</option>
                </select>
            </div>
            <div class="form-group">
                <label for="nacionalidade">Idade</label>
                <input type="text" class="form-control" id="nacionalidade" placeholder="Brasil">
            </div>
            <div class="form-group">
                <label for="nacionalidade">País em que foi visto pela última vez</label>
                <input type="text" class="form-control" id="nacionalidade" placeholder="Brasil">
            </div>
            <div class="form-group">
                <label for="apelido">Apelido:</label>
                <input type="text" class="form-control" id="apelido" placeholder="Rubinho">
            </div>
            <div class="form-group">
                <label for="descricao">Descrição do Criminoso:</label>
                <input type="text" class="form-control" id="descricao" placeholder="Caracteristicas do criminoso">
            </div>
            <div class="form-group">
                <label for="status">Status</label>
                <select id="status" class="form-control">
                    <option selected>Foragido</option>
                    <option>Capturado</option>
                    <option>Extraditado</option>
                </select>
            </div>

            <button type="submit" class="btn btn-secondary">Enviar</button>
            <a href="detalhesCriminoso.html">
                <button type="button" class="btn btn-secondary">Cancelar</button>
            </a>
    </div>
    </form>
    </div>


    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIy"></script>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        function getURLParametro(nome) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(nome);
        }

        document.getElementById("editarCadastroCriminosoForm").addEventListener("submit", function (event) {
            event.preventDefault();

            const id = getURLParametro('id');
            console.log(id);

            const nome = document.getElementById("nome").value;
            const sobrenome = document.getElementById("sobrenome").value;
            const nacionalidade = document.getElementById("nacionalidade").value;
            const dataNascimento = document.getElementById("dataNascimento").value;
            const altura = document.getElementById("altura").value;
            const genero = document.getElementById("genero").value;
            const idade = document.getElementById("idade").value;
            const paisVistoPorUltimo = document.getElementById("paisVistoPorUltimo").value;
            const apelido = document.getElementById("apelido").value;
            const descricao = document.getElementById("descricao").value;
            const statusDoCriminoso = document.getElementById("status").value;

            const data = {
                nome: nome,
                sobrenome: sobrenome,
                nacionalidade: nacionalidade,
                dataNascimento: dataNascimento,
                altura: altura,
                genero: genero,
                idade: idade,
                paisVistoPorUltimo: paisVistoPorUltimo,
                apelido: apelido,
                descricao: descricao,
                statusDoCriminoso: statusDoCriminoso,
            };

            axios.put(`http://localhost:3338/api/criminoso/${id}`, data)
                .then(function (response) {
                    console.log("Atualização de criminoso bem-sucedida!", response.data);
                    window.location.href = `detalhesCriminoso.html?id=${id}`;
                })
                .catch(function (error) {
                    console.error("Erro ao atualizar criminoso:", error);
                });
        });
    </script>



</body>

</html>